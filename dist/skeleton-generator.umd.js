(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
  typeof define === 'function' && define.amd ? define(factory) :
  (global = global || self, global.generatePlaceholder = factory());
}(this, (function () { 'use strict';

  var _slicedToArray=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a;}finally{try{!d&&h['return']&&h['return']();}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}();function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}var chunkArray=function(a){for(var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2,c=[];a.length;)c.push(a.splice(0,b));return c},calcValue=function(a,b){return /%$/.test(a)?100*a.replace('%','')/b:+a},rect=function(a){var b=+a.width,c=+a.height,d=a.x?+a.x:0,e=a.y?+a.y:0,f=a.rx||'auto',g=a.ry||'auto';'auto'===f&&'auto'===g?f=g=0:'auto'!==f&&'auto'===g?f=g=calcValue(f,b):'auto'!==g&&'auto'===f?g=f=calcValue(g,c):(f=calcValue(f,b),g=calcValue(g,c)),f>b/2&&(f=b/2),g>c/2&&(g=c/2);var h=0<f&&0<g;return ['M'+(d+f)+' '+e,'H'+(d+b-f)].concat(_toConsumableArray(h?['A'+f+' '+g+' 0 0 1 '+(d+b)+' '+(e+g)]:[]),['V'+(e+c-g)],_toConsumableArray(h?['A'+f+' '+g+' 0 0 1 '+(d+b-f)+' '+(e+c)]:[]),['H'+(d+f)],_toConsumableArray(h?['A'+f+' '+g+' 0 0 1 '+d+' '+(e+c-g)]:[]),['V'+(e+g)],_toConsumableArray(h?['A'+f+' '+g+' 0 0 1 '+(d+f)+' '+e]:[]),['z'])},ellipse=function(a){var b=+a.cx,c=+a.cy,d=a.rx?+a.rx:+a.r,e=a.ry?+a.ry:+a.r;return ['M'+(b+d)+' '+c,'A'+d+' '+e+' 0 0 1 '+b+' '+(c+e),'A'+d+' '+e+' 0 0 1 '+(b-d)+' '+c,'A'+d+' '+e+' 0 0 1 '+(b+d)+' '+c,'z']},line=function(a){var b=a.x1,c=a.y1,d=a.x2,e=a.y2;return ['M'+ +b+' '+ +c,'L'+ +d+' '+ +e]},poly=function(a){var b=a.points,c=b.trim().split(' ').reduce(function(a,b){return [].concat(_toConsumableArray(a),_toConsumableArray(b.includes(',')?b.split(','):[b]))},[]),d=chunkArray(c,2);return d.map(function(a,b){var c=_slicedToArray(a,2),d=c[0],e=c[1];return ''+(0===b?'M':'L')+d+' '+e})},toPathString=function(a){return Array.isArray(a)?a.join(' '):''},elementToPath=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=b.nodeName,e=void 0===c?'name':c,f=b.nodeAttrs,g=void 0===f?'attributes':f,h=a[e],i=a[g],j=void 0;return 'rect'===h&&(j=rect(i)),('circle'===h||'ellipse'===h)&&(j=ellipse(i)),'line'===h&&(j=line(i)),'polyline'===h&&(j=poly(i)),'polygon'===h&&(j=[].concat(_toConsumableArray(poly(i)),['Z'])),'path'===h?i.d:toPathString(j)};

  var _slicedToArray$1=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a;}finally{try{!d&&h['return']&&h['return']();}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}(),_extends=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a};function _objectWithoutProperties(a,b){var c={};for(var d in a)0<=b.indexOf(d)||Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return c}var trim=function(a){return function(b){return a(b).replace(/(\r\n|\n|\r)/gm,'').replace(/ +(?= )/g,'')}};var animation=function(){return '\n  <linearGradient id="'+fills+'">\n    <stop\n      offset="0.599964"\n      stop-color="#f3f3f3"\n      stop-opacity="1"\n    >\n      <animate\n        attributeName="offset"\n        values="-2; -2; 1"\n        keyTimes="0; 0.25; 1"\n        dur="2s"\n        repeatCount="indefinite"\n      ></animate>\n    </stop>\n    <stop\n      offset="1.59996"\n      stop-color="#ecebeb"\n      stop-opacity="1"\n    >\n      <animate\n        attributeName="offset"\n        values="-1; -1; 2"\n        keyTimes="0; 0.25; 1"\n        dur="2s"\n        repeatCount="indefinite"\n      ></animate>\n    </stop>\n    <stop\n      offset="2.59996"\n      stop-color="#f3f3f3"\n      stop-opacity="1"\n    >\n      <animate\n        attributeName="offset"\n        values="0; 0; 3"\n        keyTimes="0; 0.25; 1"\n        dur="2s"\n        repeatCount="indefinite"\n      ></animate>\n    </stop>\n  </linearGradient>\n'};var render={rect:function f(a){var b=a.x,c=a.y,d=a.width,e=a.height;return ' <rect rx="3" ry="3" x="'+b+'" y="'+c+'" width="'+d+'" height="'+e+'" />'},use:function e(a){var b=a.id,c=a.x,d=a.y;return '<use href="#'+b+'" x="'+c+'" y="'+d+'" />'},path:function(a){var b=a.path,c=a.id;return '<path id="'+c+'" d="'+b+'" />'},circle:function e(a){var b=a.r,c=a.cx,d=a.cy;return '<circle r="'+b+'" cx="'+c+'" cy="'+d+'" />'}},renderRefs=function(a){return a.reduce(function(a,b){return a+b.positions.map(function(a){return render.use(_extends({},b,a))}).join('')},'')},renderSingleElement=function(a){var b=a.type,c=_objectWithoutProperties(a,['type']);return render[b](c)},randomKey=function(){return Math.random().toString(36).substring(7)},generateIds=function(){return ['clip-'+randomKey(),'fill-'+randomKey()]};var template=trim(function(a){var b=a.width,c=a.height,d=a.singles,e=a.groups,f=generateIds(),g=_slicedToArray$1(f,2),h=g[0],i=g[1];return '\n    <svg xmlns="http://www.w3.org/2000/svg" width="'+b+'" height="'+c+'" viewBox="0 0 '+b+' '+c+'" preserveAspectRatio="none">\n      <rect x="0" y="0" width="100%" height="100%" clip-path="url(#'+h+')" style=\'fill: url("#'+i+'");\' />\n      <defs>\n        '+e.map(render.path).join('')+'\n        <clipPath id="'+h+'">\n          '+renderRefs(e)+'\n          '+d.map(renderSingleElement).join('')+'\n        </clipPath>\n        '+animation()+'\n      </defs>\n    </svg>\n  '});

  var _extends$1=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a};function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _objectWithoutProperties$1(a,b){var c={};for(var d in a)0<=b.indexOf(d)||Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return c}function _toConsumableArray$1(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}var generateID=function(){return Math.random().toString(36).substring(7)},SELECTORS={container:'[data-draw=\'container\']',group:'[data-draw=\'group\']',text:'[data-draw=\'text\']',rect:'[data-draw=\'rect\']',circle:'[data-draw=\'circle\']',border:'[data-draw=\'border\']'},defaultGroupIdentifier=function(a){return a.dataset['draw-id']},defaultConfig={container:SELECTORS.container,group:SELECTORS.group,text:SELECTORS.text,rect:SELECTORS.rect,circle:SELECTORS.circle,border:SELECTORS.border,identifyGroup:defaultGroupIdentifier},isHidden=function(a){return !(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},getPosition=function(a,b){var c=a.getBoundingClientRect();return {left:c.left-b.left,top:c.top-b.top,width:c.width,height:c.height}},getElementHeight=function(a){var b=a.getPropertyValue('box-sizing'),c=parseInt(a.getPropertyValue('height'));if('border-box'!==b)return c;var d=parseInt(a.getPropertyValue('padding-top')),e=parseInt(a.getPropertyValue('padding-bottom')),f=parseInt(a.getPropertyValue('border-top-width')),g=parseInt(a.getPropertyValue('border-bottom-width'));return c-d-e-f-g},getNodeStyles=function(a){return window.getComputedStyle(a,null)},countLines=function(a){var b=getNodeStyles(a),c=parseInt(b.getPropertyValue('font-size')),d=parseInt(b.getPropertyValue('line-height')),e=isNaN(d)?c:d,f=getElementHeight(b),g=f<2*e?1:Math.ceil(f/e);return {lines:g?g:1,lineHeight:e}},getRange=function(a,b){var c=document.createRange();c.selectNodeContents(a);var d=c.getBoundingClientRect();return {left:d.left-b.left,width:d.width}},boxMatrix=[[0,0,1,0],[0,0,0,1],[1,0,0,1],[0,1,1,0]],elements={text:function k(a,b){if(!isHidden(a)){var c=getPosition(a,b),d=countLines(a),e=d.lines,f=d.lineHeight;if(1===e){var l=getRange(a,b);c.left=l.left,c.width=l.width;}var g=c.left,h=c.top,i=c.width,j=c.height;return [].concat(_toConsumableArray$1(Array(e).keys())).map(function(a){return {type:'rect',x:g,y:a?h+a*f+5*a:h,height:j<f?j:f,width:i}})}},rect:function h(a,b){var c=getPosition(a,b),d=c.left,e=c.top,f=c.width,g=c.height;return [{type:'rect',x:d,y:e,width:f,height:g}]},border:function h(a,b){var c=getPosition(a,b),d=c.left,e=c.top,f=c.width,g=c.height;return [].concat(_toConsumableArray$1([,,,,].keys())).map(function(a){return {type:'rect',x:boxMatrix[a][0]?f+d-5:d,y:boxMatrix[a][1]?g+e-5:e,height:boxMatrix[a][2]?5:g,width:boxMatrix[a][3]?5:f}})},circle:function h(a,b){var c=getPosition(a,b),d=c.left,e=c.top,f=c.width,g=c.height;return [{type:'circle',cx:d+f/2,cy:e+g/2,r:f/2}]}},walkThroughNodes=function(a,b,c){return Array.from(b).map(function(b){return elements[a](b,c)}).filter(function(a){return !!a}).reduce(function(a,b){return [].concat(_toConsumableArray$1(a),_toConsumableArray$1(b))},[])},getGroup=function(a,b,c){var d=a[0],e=getPosition(d,b),f=d.querySelectorAll(c.text),g=d.querySelectorAll(c.rect),h=d.querySelectorAll(c.circle),i=d.querySelectorAll(c.border),j=[].concat(_toConsumableArray$1(walkThroughNodes('text',f,b)),_toConsumableArray$1(walkThroughNodes('rect',g,b)),_toConsumableArray$1(walkThroughNodes('circle',h,b)),_toConsumableArray$1(walkThroughNodes('border',i,b))),k=j.map(function(a){var b=a.type,c=_objectWithoutProperties$1(a,['type']);return elementToPath({type:'element',name:b,attributes:c})}).join(' '),l=a.map(function(c){c.style.height=a[0].offsetHeight+'px',c.style.width=a[0].width+'px';var d=getPosition(c,b),f=d.left,g=d.top;return {x:f-e.left,y:g-e.top}});return {positions:l,path:k,id:generateID()}},getPaths=function(a,b,c,d){var e=c.getBoundingClientRect(),f=Array.from(c.querySelectorAll(b)).filter(function(a){return !d.find(function(c){return Array.from(c.querySelectorAll(b)).includes(a)})});return walkThroughNodes(a,f,e)},getMainDrawing=function(a,b){var c=a.getBoundingClientRect(),d=Array.from(a.querySelectorAll(b.group)),e=d.reduce(function(a,c){var d=b.identifyGroup(c);return a[d]?_extends$1({},a,_defineProperty({},d,[].concat(_toConsumableArray$1(a[d]),[c]))):_extends$1({},a,_defineProperty({},d,[c]))},{}),f=Object.keys(e).map(function(a){return getGroup(e[a],c,b)}),g=[].concat(_toConsumableArray$1(getPaths('text',b.text,a,d)),_toConsumableArray$1(getPaths('rect',b.rect,a,d)),_toConsumableArray$1(getPaths('circle',b.circle,a,d)),_toConsumableArray$1(getPaths('border',b.border,a,d))),h=c.width,i=c.height;return template({width:h,height:i,singles:g,groups:f})};var index = (function(a){var b=_extends$1({},defaultConfig,a);if(!document)return console.error('Function available only in browser environment!');var c=document.querySelectorAll(b.container);if(!c)return console.error('No containers was found on the page');var d=Array.from(c).map(function(a){return getMainDrawing(a,b)});return d});

  return index;

})));
