import t from"element-to-path";import{nanoid as e}from"nanoid";function n(){return(n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var r,i=function(t){return'\n  <rect rx="3" ry="3" x="'+t.x+'" y="'+t.y+'" width="'+t.width+'" height="'+t.height+'" />\n'},o=function(t){return'\n  <path id="'+t.id+'" d="'+t.path+'" />\n'},a=(r=function(t){var e=t.width,r=t.height,a=t.singles,u=t.groups;return'\n<svg width="'+e+'" height="'+r+'" viewBox="0 0 '+e+" "+r+'" preserveAspectRatio="none">\n  <rect x="0" y="0" width="100%" height="100%" clip-path="url(#clip)" style=\'fill: url("#fill");\'></rect>\n  <defs>\n    '+u.map(o).join("")+'\n    <clipPath id="clip">\n      '+function(t){return t.reduce(function(t,e){return t+e.positions.map(function(t){return'\n  <use href="#'+(r=n({},e,t)).id+'" x="'+r.x+'" y="'+r.y+'" />\n';var r}).join("")},"")}(u)+"\n      "+a.map(i).join("")+'\n    </clipPath>\n    \n  <linearGradient id="fill">\n    <stop\n      offset="0.599964"\n      stop-color="#f3f3f3"\n      stop-opacity="1"\n    >\n      <animate\n        attributeName="offset"\n        values="-2; -2; 1"\n        keyTimes="0; 0.25; 1"\n        dur="2s"\n        repeatCount="indefinite"\n      ></animate>\n    </stop>\n    <stop\n      offset="1.59996"\n      stop-color="#ecebeb"\n      stop-opacity="1"\n    >\n      <animate\n        attributeName="offset"\n        values="-1; -1; 2"\n        keyTimes="0; 0.25; 1"\n        dur="2s"\n        repeatCount="indefinite"\n      ></animate>\n    </stop>\n    <stop\n      offset="2.59996"\n      stop-color="#f3f3f3"\n      stop-opacity="1"\n    >\n      <animate\n        attributeName="offset"\n        values="0; 0; 3"\n        keyTimes="0; 0.25; 1"\n        dur="2s"\n        repeatCount="indefinite"\n      ></animate>\n    </stop>\n  </linearGradient>\n\n  <defs>\n</svg>\n'},function(t){return r(t).replace(/(\r\n|\n|\r)/gm,"")}),u={container:"[data-draw='container']",group:"[data-draw='group']",text:"[data-draw='text']",rect:"[data-draw='rect']",border:"[data-draw='border']",identifyGroup:function(t){return t.dataset["draw-id"]}},c=function(t,e){var n=t.getBoundingClientRect();return{left:n.left-e.left,top:n.top-e.top,width:n.width,height:n.height}},l=function(t){return window.getComputedStyle(t,null)},f={text:function(t,e){if(!function(t){return!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}(t)){var n=c(t,e),r=function(t){var e=l(t),n=parseInt(e.getPropertyValue("font-size")),r=parseInt(e.getPropertyValue("line-height")),i=isNaN(r)?n:r,o=function(t){var e=t.getPropertyValue("box-sizing"),n=parseInt(t.getPropertyValue("height"));return"border-box"!==e?n:n-parseInt(t.getPropertyValue("padding-top"))-parseInt(t.getPropertyValue("padding-bottom"))-parseInt(t.getPropertyValue("border-top-width"))-parseInt(t.getPropertyValue("border-bottom-width"))}(e);return{lines:o<2*i?1:Math.ceil(o/i),lineHeight:i}}(t),i=r.lines,o=r.lineHeight;if(1===i){var a=function(t){var e=document.createRange();return e.selectNode(t),e.getClientRects()}(t);n.left=a[1].x-20,n.width=a[1].width}var u=n.left,f=n.top,p=n.width,d=n.height;return[].concat(Array(i).keys()).map(function(t){return{x:u,y:t?f+t*o+5*t:f,height:d<o?d:o,width:p}})}},rect:function(t,e){var n=c(t,e),r=l(t),i=parseInt(r.getPropertyValue("padding-left")),o=parseInt(r.getPropertyValue("padding-right"));return[{x:n.left+i,y:n.top,width:n.width+o,height:n.height}]}},p=function(t,e,n){return Array.from(e).map(function(e){return f[t](e,n)}).filter(function(t){return!!t}).reduce(function(t,e){return[].concat(t,e)},[])},d=function(t,e,n,r){var i=n.getBoundingClientRect(),o=Array.from(n.querySelectorAll(e)).filter(function(t){return!r.find(function(n){return Array.from(n.querySelectorAll(e)).includes(t)})});return p(t,o,i)};export default function(r){var i=n({},u,r);if(!document)return console.error("Function available only in browser environment!");var o=document.querySelectorAll(i.container);return o?Array.from(o).map(function(r){return function(r,i){var o=r.getBoundingClientRect(),u=o.width,c=o.height,l=Array.from(r.querySelectorAll(i.group)),f=l.reduce(function(t,e){var r,o,a=i.identifyGroup(e);return n({},t,t[a]?((o={})[a]=[].concat(t[a],[e]),o):((r={})[a]=[e],r))},{}),s=Object.keys(f).map(function(n){return function(n,r){var i=n[0],o=i.getBoundingClientRect(),a=i.querySelectorAll(r.text),u=i.querySelectorAll(r.rect),c=[].concat(p("text",a,o),p("rect",u,o)).map(function(e){return t({type:"element",name:"rect",attributes:e})}).join(" ");return{positions:n.map(function(t){var e=t.getBoundingClientRect();return{x:e.x,y:e.y}}),path:c,id:e()}}(f[n],i)}),h=[].concat(d("text",i.text,r,l),d("rect",i.rect,r,l));return a({width:u,height:c,singles:h,groups:s})}(r,i)}):console.error("FNo containers was found on the page")}
//# sourceMappingURL=skeleton-generator.module.js.map
